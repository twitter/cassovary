Scripts
=======

Scala
-----
All scripts in the scala directory should be run with ./build.sh [script name] [script arguments].
If there are problems running any scripts, modify the second last line of build.sh to increase or
reduce the heap size. For example,

    JAVA_OPTS="-server -Xmx8g -Xms4g"

Allows a maximum heap size of 8 GB and allows Java to start off with a heap size of 4 GB.


### RenumberGraphDirectory [path/to/graph_dump] [path/to/target_output_directory] [path/to/mapping]
Renumbers an input graph directory, providing the output as well as the mapping, which
can also be used by RenumbererMapper. The input graph directory must contain "part-r-XXXXX" files,
which contain edges in the following form:
    5 2
    6
    19
    23 1
    18
In the above example, the node with id 5 has 2 edges, namely to ids 6 and 19,
and the node with id 23 has 1 edge to id 18. If an invalid directory is provided, the output
is undefined.


### RenumbererMapper [maxId | path/to/step2xr2.txt] [path/to/inputIds path/to/outputIndices [reverse]]

interactive terminal for the renumberer. If you provide a number as the argument, an empty
Renumberer is initialized with that capacity. If you provide a path to a Renumberer dump file
(which is generated by CachedDirectedGraph), it will load that instead.

If you provide input and output files, a forward mapping will be computed from integers
in the inputIds file to that of the outputIndices file. The inputIds file must have only
a single integer per line.

If you provide a 4th argument, then a reverse mapping will be computed for the first element on each line.
For example, if there is a mapping from 1 -> 4, and the line "4 3 2 1 0" is provided,
then the line "1 3 2 1 0" is returned.


### RunCDGServer [config.json]

Runs a CachedDirectedGraph server to demonstrate Ostrich stats collection. Provide a config.json
file to configure the settings for this server.


Python
------
Python scripts require Python 2.6+

### map_ids_backward and map_ids_forward

If you set the renumber = true option in common.conf, a file step2xr2.txt
is produced in the cache directory. This contains the id > index mapping.
Use map_ids_backward to recover the original ids given a list of indices,
and use map_ids_forward to generate the correct indices given a list of ids.